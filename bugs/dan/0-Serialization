-- -*- M2 -*-
-- further work is needed on serialization:

    -- serialize fails for objects containing empty
    -- MutableLists/MutableHashTables,  for MutableMatrices,
    -- for serializing strings and null at top-level:
    ----------------------
    errorDepth = 0
    needsPackage "Serialization";
    deepCopy:= obj->(
	 s := serialize obj;
	 << obj << " --> " << stack lines s << " --> " << value s << endl;
	 );

    entry=null;
    deepCopy entry; --fails
    entry = {null}
    deepCopy entry; --ok

    str="a string";
    deepCopy str;--fails
    str = {"a string";}
    deepCopy str; --ok

    mht = new MutableHashTable;
    deepCopy mht;-- fails

    ml = new MutableList;
    deepCopy ml;-- fails

    ll = { ml };
    deepCopy ll;-- fails
    ll = { mht };
    deepCopy ll;-- fails


    mat= matrix{{1,1}}
    mutablemat= mutableMatrix(mat)
    deepCopy mat; --ok
    deepCopy mutablemat;-- fails
    --------------
